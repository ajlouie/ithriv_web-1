<div *ngIf="!user && !publicpage" class="please-log-in">
  <app-login-services></app-login-services>
</div>

<mat-accordion *ngIf="user || publicpage">
  <mat-expansion-panel
    [expanded]="true"
    (opened)="panelOpenState = true"
    (closed)="panelOpenState = false"
  >
    <mat-expansion-panel-header>
      <mat-panel-title> </mat-panel-title>
      <mat-panel-description> </mat-panel-description>
    </mat-expansion-panel-header>
    <div
      id="tiles"
      fxLayout="row wrap"
      fxLayoutGap="45px grid"
      fxLayoutAlign="center"
      *ngIf="user || publicpage"
    >
      <app-category-tile
        *ngFor="let category of categories"
        [category]="category"
        (click)="goCategory(category)"
      ></app-category-tile>
    </div>
  </mat-expansion-panel>
</mat-accordion>

<h1 class="mat-h1 page-title" *ngIf="!user && publicpage">Public View</h1>
<mat-tab-group
  mat-stretch-tabs
  dynamicHeight
  backgroundColor="primary"
  *ngIf="!user && publicpage"
>
  <mat-tab label="Events">
    <div class="example-small-box mat-elevation-z4">
      <app-event-list
        [events]="events"
        [user]="user"
        [sidenavExpanded]="false"
        *ngIf="!user && publicpage"
      ></app-event-list>
    </div>
  </mat-tab>
  <mat-tab>
    <ng-template mat-tab-label>
      <span>Research Commons</span>
    </ng-template>
    <ng-template matTabContent>
      <ng-container class="example-small-box mat-elevation-z4">
        <app-commons-home
          [user]="user"
          formStatus="commons-projects-list"
        ></app-commons-home>
      </ng-container>
    </ng-template>
  </mat-tab>
</mat-tab-group>

<h1 class="mat-h1 page-title" *ngIf="user">myTHRIV Workspace</h1>

<mat-tab-group
  mat-stretch-tabs
  dynamicHeight
  backgroundColor="primary"
  *ngIf="user"
>
  <mat-tab label="Events">
    <ng-template matTabContent>
      <ng-container class="example-small-box mat-elevation-z4">
        <app-event-list
          [events]="events"
          [user]="user"
          [sidenavExpanded]="false"
          *ngIf="user"
        ></app-event-list>
      </ng-container>
    </ng-template>
  </mat-tab>
  <mat-tab label="My Favorite Resources and Events">
    <ng-template matTabContent>
      <ng-container class="example-large-box mat-elevation-z4">
        <app-favorite-resource-list
          [user]="user"
          [institution]="institution"
          *ngIf="user"
        ></app-favorite-resource-list>
      </ng-container>
    </ng-template>
  </mat-tab>
  <mat-tab label="My Resources and Events">
    <ng-template matTabContent>
      <ng-container class="example-large-box mat-elevation-z4">
        <app-user-resource-list
          [user]="user"
          [institution]="institution"
          *ngIf="user"
        ></app-user-resource-list>
      </ng-container>
    </ng-template>
  </mat-tab>
  <mat-tab>
    <ng-template mat-tab-label>
      <span>Research Commons</span>
    </ng-template>
    <ng-template matTabContent>
      <ng-container class="example-small-box mat-elevation-z4">
        <app-commons-home
          [user]="user"
          formStatus="commons-projects-list"
          color="primary"
        ></app-commons-home>
        <!-- <router-outlet name="commons-outlet"></router-outlet> -->
        <!-- <iframe
          width="100%"
          height="100%"
          frameBorder="0"
          [src]="urlSafe"
        ></iframe> -->
      </ng-container>
    </ng-template>
  </mat-tab>
  <mat-tab label="Recently Updated Resources and Events">
    <ng-template matTabContent>
      <ng-container class="example-small-box mat-elevation-z4">
        <app-resource-list
          [resources]="resources"
          [user]="user"
          [sidenavExpanded]="false"
          *ngIf="user"
        ></app-resource-list>
      </ng-container>
    </ng-template>
  </mat-tab>
</mat-tab-group>
